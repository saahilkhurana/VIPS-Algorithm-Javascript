(function(c){var e=window.AmazonUIPageJS||window.P,k=e._namespace||e.attributeErrors,b=k?k("AmazonGatewayAuiAssets"):e;b.guardFatal?b.guardFatal(c)(b,window):b.execute(function(){c(b,window)})})(function(c,e,k){c.when("A").register("sg-jsutil",function(b){var c=b.$;return{safeCall:function(b,e){return c.isFunction(b)?b(e):e}}});c.when("A","load").execute("ah-inst-img-size",function(b){function n(a){if(!a)return null;var d=f(a).attr("src");a=f(a).data("a-hires");return d===a?null:d}function p(a){"object"===
typeof l.ue&&"function"===typeof l.ue.count&&l.ue&&l.ue.count(a,(l.ue.count(a)||0)+1)}function h(a,d){p("gw-img-size-invoke");f.ajax({type:"HEAD",async:!0,url:a,success:function(a,f,l){p("gw-img-size-success");b.trigger(d,parseInt(l.getResponseHeader("Content-Length"),10))},error:function(d,a,f){p("gw-img-size-error")}})}function g(a,d){0<a.length&&(r[d]={count:a.length,totalSize:0,images:f.unique(a)},f(r[d].images).each(function(a,f){var m=d+"_"+a;b.on(m,function(a){isNaN(a)||(--r[d].count,r[d].totalSize+=
a,0===r[d].count&&l.ue&&l.ue.count(d,r[d].totalSize))});h(f,m)}))}function m(a,d){var f=b.$(a);(f=0>=f.length?null:n(f[0]))&&g([f],d)}function a(a,d){d=d||a.length;var b=[];f(a.slice(0,d)).each(function(d,a){var f=n(a);if(!f)return[];b.push(f)});return b}var f=b.$,l=e,r=[];c.execute("inst-cf-img",function(){p("gw-inst-img");m(".gw-critical-content img","gw-cf-img-size")});c.when("x1").execute("inst-x1-img",function(){c.execute("inst-x1-rec-img",function(){var b=1;f("#gw-content-grid .feed-carousel .feed-carousel-shelf").slice(0,
2).each(function(d,l){if(2>=b){var m="gw-shoveler-img-size-"+b++,c=f(l).find("img");6<=c.length&&(c=a(c,6),g(c,m))}})});c.execute("inst-x1-unrec-img",function(){g(a(b.$("#desktop-unrec-col-1 img")),"gw-unrec-col-1-img-size");g(a(b.$("#desktop-unrec-col-2 img")),"gw-unrec-col-2-img-size");g(a(b.$("#desktop-unrec-col-3 img")),"gw-unrec-col-3-img-size");m("#desktop-unrec-sidekick #dotd-image img","gw-unrec-sidekick-img-size")})})});c.when("A").register("dombinder",function(b){function c(b,
a){var f=0;a=a.split(".");for(var l=a.length;f<l;f++)b=b&&b[a[f]];return b}function e(b){return h.map(h(b).data("bind").split(","),function(a){a=a.split(":");var f=h.trim(a[0]),l=h.trim(a[1]),c=g[f];if(c)return c.init&&c.init(b,l),function(a){c.update(b,l,a)}})}var h=b.$,g={text:{update:function(b,a,f){h(b).text(c(f,a)||"")}},html:{update:function(b,a,f){h(b).html(c(f,a)||"")}},href:{update:function(b,a,f){h(b).attr("href",c(f,a)||"")}},trimText:{update:function(b,a,f){b=h(b);f=b.text();if(f.length>
a){for(var l=a-4;0<=l&&0<"[.,-/#!$%^&*;:{}=-_`~()] ".indexOf(f[l]);)l--;b.text(f.substring(0,0<=l?l+1:a-3)+"...")}}},value:{update:function(b,a,f){h(b).val(c(f,a)||"")}},visible:{update:function(b,a,f){var l=!1;"!"===a.charAt(0)&&(l=!0,a=a.substring(1));a=!!c(f,a);l!==a?h(b).show():h(b).hide()}},css:{init:function(b,a){var f=h(b),l=f.data("dombcss")||[];l[a]="";f.data("dombcss",l)},update:function(b,a,f){b=h(b);var l=b.data("dombcss"),g=l[a];f=c(f,a);g!==f&&(l[a]=f,g&&b.removeClass(g),f&&b.addClass(f))}},
attr:{init:function(b,a){var f=h(b),l=f.data("dombattr")||[];l[a]={};f.data("dombattr",l)},update:function(b,a,f){var l=h(b);b=l.data("dombattr");var g=b[a];f=c(f,a);g!==f&&(b[a]=f,g&&h.each(g,function(a,d){l.removeAttr(a)}),f&&h.each(f,function(a,d){l.attr(a,d)}))}}};return{init:function(b){var a={$root:b,bindings:[]};b.find("[data-bind]").each(function(){h.each(e(this),function(f,b){a.bindings.push(b)})});return a},update:function(b,a){h.each(b.bindings,function(f,b){b(a)})}}});c.when("jQuery").register("gwAjax",
function(b){return function(c,p){function h(f,b,m){"object"===typeof e.ue&&"function"===typeof e.ue.count&&(g(p.errorCounter||"gwAjaxError"),p.id&&g("gwAjaxError:"+p.id));"function"===typeof e.ueLogError&&e.ueLogError({logLevel:"WARN",attribution:"gwAjax-"+(p.id||c),message:"gwAjax call failed "+(JSON&&JSON.stringify?JSON.stringify({url:c,"params-data":p.params||p.data}):"")});"function"===typeof a&&a(f,b,m)}function g(a){"object"===typeof e.ue&&"function"===typeof e.ue.count&&e.ue.count(a,(e.ue.count(a)||
0)+1)}p=b.extend(!0,{},p);var m=p.success,a=p.error;p.success=function(a,b,c){a.error?h(a,b,c):"function"===typeof m&&m(a,b,c)};p.error=h;p.data=p.params?p.params:p.data;g("gwAjaxCall");p.ajaxCounter&&g(p.ajaxCounter);return b.ajax(c,p)}});c.when("jQuery","gw-hud-punt").execute("gw-hud-sidekick",function(b){b("#gw-hud-grid").css({display:"none"})});c.when("A","sg-jsutil","a-modal","gw-productdb","productdb-binding-helper","sg-media-builder","gw-sims","gw-popover-data").register("gw-popover",
function(b,n,p,h,g,m,a,f){function l(d,a){e.uet&&e.uet(d,a,{wb:1})}function r(d){if(e.ue&&"function"===typeof e.ue.count)return e.ue.count(d)||0}function v(d){e.ue&&"function"===typeof e.ue.count&&e.ue.count(d,(e.ue.count(d)||0)+1)}function d(d){return d.closest("*[data-sgproduct]").data("sgproduct")}function x(d,a){A[d.asin]&&A[d.asin].isResolved()?B.resetSimData():(A[d.asin]=k.Deferred(),d&&d.asin&&a?B.fetch(d,a,A[d.asin]):A[d.asin].reject())}var k=b.$,y={},A={};if(!k("html").hasClass("a-touch")){n=
k('<span style="display: none" />').appendTo("body");var t=k("#gw-popover-wrapper"),q=new g(h,t),z=p.create(n,{name:"gw-asin-popover",width:"90%","max-width":900,height:590,popoverLabel:f.popoverLabel,closeButton:!1}),B=new a(q),D=k("#gw-quick-look-btn");k("#a-page").delegate("li[data-sgproduct]","mouseenter",function(d){k(d.currentTarget).append(D);k(d.currentTarget).find("[title]").removeAttr("title");D.addClass("active")});D.mouseenter(function(){var a=k(this),f=d(a),a=a.siblings().children("a").attr("href");
x(f,a)});k(".bestsellers .listRow a").mouseenter(function(){var a=k(this),f=d(a),a=a.attr("href");x(f,a);!f||!f.asin||y[f.asin]&&y[f.asin].isResolved()||!(a=h.get(f.asin))||(y[f.asin]=k.Deferred(),y[f.asin].resolve(a))});c.when("gwAjax").execute(function(d){var a={};k("#a-page").delegate(".fresh-shoveler li[data-sgproduct]","mouseenter mousemove",function(f){f=k(f.currentTarget);var q=f.data("sgproduct").asin;if(!y[q]||!y[q].isResolved()){var t=[];f.add(f.prev("li[data-sgproduct]")).add(f.next("li[data-sgproduct]")).each(function(){var d=
k(this).data("sgproduct");if(d&&d.asin){var f=h.get(d.asin),q=(f=!(!a[d.asin]&&f&&f.loading))&&1500<b.now()-a[d.asin];if(!f||q)t.push(d.asin),a[d.asin]=b.now()}});y[q]=k.Deferred();t.length?(d("/gp/gw/ajax/pdb.html",{id:"quicklook-pdb",data:{swn:"productdb-ajax",sa:'{"asins": ["'+t.join('","')+'"]}',oe:'{"isDesktop":1,"isTablet":0,"isMobile":0}',rrid:e.ue_id}}).done(function(d){h._add(d);for(var f=0;f<t.length;f++)a[t[f]]=Infinity;y[q].resolve(d)}).fail(y[q].reject),v("freshHoverCount")):y[q].resolve()}})});
k("#a-page").delegate("li[data-sgproduct]","mouseleave",function(d){D.removeClass("active")});var C="#a-popover-"+z.attrs("id")+" ";p=k.map([".a-popover-header { display: none; }",".a-popover-inner { padding: 0px !important; margin: 0px !important; overflow: hidden !important; height: 100% !important; }"],function(d){return C+d}).join(" ");k("head").append("<style>"+p+"</style>");b.on("a:popover:hide:gw-asin-popover",function(d){e.history.state&&e.history.state.popup&&e.history.back();q.clear()});
k(e).bind("popstate",function(){z.hide()});return{show:function(d,a){v("freshPopOverOn");l("bb","popoverLatency"+r("freshPopOverOn"));e.history&&e.history.pushState&&e.history.pushState({popup:1},"");q.setAsin(d,{beforeUpdate:function(f){if(f.loading)return v("freshPopOverLoading"),f;var q=(new m(f.images[0])).autoCrop().scaleXY(500,400).build(),q={url:a,image:q,actionUrl:{action:"/gp/product/handle-buy-box/"+function(d){return d.substring(d.indexOf("/ref=")+1,d.length)}(a)}};f.reviews&&(q.reviews=
k.extend({},f.reviews,{url:a+"#customerReviews"}));k.when(A[d],y[d]).done(function(a,f){B.showSims(d,a)});A[d].fail(B.setNoSimView);l("cf","popoverLatency"+r("freshPopOverOn"));return k.extend({},f,q)}});z.show()},hide:function(){z.hide()}}}});c.when("A","sg-media-builder","gw-productdb").register("gw-sims",function(b,n,p){var h=b.$;return function(b){function m(d,a){e.uet&&e.uet(d,a,{wb:1})}function a(d){if(e.ue&&"function"===typeof e.ue.count)return e.ue.count(d)||0}function f(d){e.ue&&
"function"===typeof e.ue.count&&e.ue.count(d,(e.ue.count(d)||0)+1)}function l(){if(!C){C=!0;I.hide();w.show();H.animate({height:"100%"},300);var d=0,f=0,q=0,t=parseInt(w.css("width"),10),b=w.find(".sims-img-link");b.each(function(a,b){d+=b.clientWidth;t<d?h(b).hide():(f=d,q+=1)});var l=t-f;0<l&&(l=Math.floor(20+l/q-1),20<l&&b.css({"padding-right":l/2+"px","padding-left":l/2+"px"}));b="popoverLatency"+a("freshPopOverOn");m("be",b);e.uex&&e.uex("ld",b,{wb:1})}}function r(){0===--q&&l()}function v(d,
a){var q=h("<a>"),t=h("<div>");q.attr("class","sims-img-link");t.addClass("sims-img-border");a&&q.addClass("selected");q.click(function(){f("freshPopOverSimsClick");w.find(".sims-img-link").removeClass("selected");h(this).addClass("selected");b.clear();b.setAsin(d.asin,{beforeUpdate:function(a){a=h.extend(!0,{},d);var q=d.url;if(a.loading)f("freshPopOverLoading");else{var t=(new n(a.images[0])).autoCrop().scaleXY(500,400).build(),t={url:q,image:t,actionUrl:{action:"/gp/product/handle-buy-box/"+k(q)}};
a.reviews&&(t.reviews=h.extend({},a.reviews,{url:q+"#customerReviews"}));a=h.extend({},a,t)}return a}})});return q.append(t)}function d(){h.each(z,function(d,a){a.url=a.url.replace(/ref=gw_pdb_pdt-[\d]+/,k(B)+"&gw_sims-"+d)})}function k(d){return 0<=d.indexOf("redirect.html?")?d.replace(/.*redirect.html|(token|location)=.*?&/g,""):d.substring(d.indexOf("/ref=")+1,d.length)}function u(){C=!1;d();var a=[];q=z.length>q?q:z.length;h(z).each(function(d,f){f.loading=!1;if(f.images[0].src){var t=(new n(f.images[0])).autoCrop().scaleXY(130,
100).build().src,b=h("<img>");b.attr("src",t);b.attr("class","sims-img");b.load(r);t=h("<div>");t.attr("class","sims-img-container");var l=h("<div>");l.addClass("sims-img-overlay");h(t).append(l);t.append(b);b=v(f,0===d);b.append(t);a.push(b)}return d<q-1});q=a.length;h(a).each(function(d,a){w.append(a)});setTimeout(l,D)}function y(){c.when("gw-popover").execute(function(d){d.hide()})}function A(){I.hide();H.addClass("hidden");E.bind("click",y)}function t(){w.empty();H.add(I).removeAttr("style");
H.removeClass("hidden");E.unbind("click",y);I.show();w.hide();q=8;z=[]}var q,z,B,D=1E4,C=!1,E=h("#sims-section"),H=E.find(".sims-wrapper"),I=E.find(".sims-loading"),w=E.find(".sims-details");h("#gw-asin-popover");return{fetch:function(d,f,q){m("af","popoverLatency"+a("freshPopOverOn"));t();B=f;d.url=B;z.push(d);f=p.get(d.asin);setTimeout(q.reject,D);f.sims?q.resolve(f.sims):c.when("gwAjax").execute(function(a){a("/gp/gw/ajax/pdb.html",{id:"quicklook-sims-pdb",data:{swn:"productdb-ajax",sa:'{"asins": [], "entityId":"'+
d.asin+'","datasetId": "purchase"}',oe:'{"isDesktop":1,"isTablet":0,"isMobile":0}',rrid:e.ue_id}}).done(function(a){if(a&&a.p&&0<a.p.length){var f=d.asin,t=a.p;t&&(p.get(f).sims||p.addSims(f,t));return q.resolve(a.p)}return q.reject()}).fail(q.reject)});return q},setNoSimView:A,showSims:function(d,a){var q=p.get(d);q.loading?f("freshPopOverSimLoadBeforePrimeAsin"):z=q.sims?h.merge([q],q.sims):h.merge([q],a);4<z.length?u():(f("simsLessThanThreshold"),A())},resetSimData:t,setWaitPeriod:function(d){D=
d}}}});c.when("A").execute(function(b){var n=b.$,p,h;if(!b.$("html").hasClass("a-touch"))if(e.cvox)e.ue&&e.ue.tag&&e.ue.tag("screenReaderOn");else{n("#a-page").delegate("*[data-sgproduct] #gw-quick-look-btn","click",function(b){g(b)});n("#a-page").delegate(".bestseller-list *[data-sgproduct]","click",function(b){g(b)});c.when("gw-popover").execute(function(b){p=b;n("#gw-popover-close").click(function(){p.hide()});h&&p.show.apply(p,h)});var g=function(b){if(!(1<b.which||b.shiftKey||b.altKey||
b.metaKey||b.ctrlKey)){var a,f;n(b.target).parents(".bestseller-list").length?(a=n(b.currentTarget).data("sgproduct"),f=n(b.target).closest("a").attr("href")):(a=n("#gw-quick-look-btn").closest("*[data-sgproduct]").data("sgproduct"),f=n("#gw-quick-look-btn").siblings().children("a").attr("href"));var l=[a.asin,f];a.asin&&f&&(b.preventDefault(),p?p.show.apply(p,l):h=l)}}}});c.when("A","sg-jsutil","dombinder").register("productdb-binding-helper",function(b,c,e){return function(b,g){function m(a,
f){e.update(d,l(f.beforeUpdate,a));a.loading||l(f.load,a)}function a(d){f();v=function(){d(r)};r.pdb_observe(v)}function f(){r&&v&&(r.pdb_unobserve(v),v=null)}var l=c.safeCall,r=null,v=null,d=e.init(g);this.setAsin=function(d,l){l=l||{};f();r=b.get(d);m(r,l);r.loading&&a(function(d){m(d,l)});return r};this.clear=function(){f();r={};e.update(d,r)}}});e.P&&c.when("jQuery","afterLoad").register("gw-resource-logger",function(b){return{instrumentResources:function(c){var p;p=!1;if(b.isArray(c)&&!b.isEmptyObject(c)){p=
!0;for(var h=0;h<c.length;h++){var g=c[h];if("id"in g&&"regex"in g&&"initiator"in g){if(!("string"===typeof g.id&&"string"===typeof g.initiator&&g.regex instanceof RegExp)){p=!1;break}}else{p=!1;break}}}h=e.performance&&"function"===typeof e.performance.getEntriesByType&&"undefined"!==typeof e.performance.getEntriesByType("resource")&&"undefined"!==typeof e.ue;if(p&&h){p=Array(c.length);for(h=0;h<p.length;h++)p[h]=!1;for(g=h=0;g<e.performance.getEntriesByType("resource").length&&h<c.length;g++)for(var m=
e.performance.getEntriesByType("resource")[g],a=m.name,f=m.initiatorType,l=0;l<c.length;l++)if(!p[l]){var r=c[l].regex;if(f===c[l].initiator&&r.test(a)){a=c[l].id;f=m;m=f.duration;e.ue.count&&(e.ue.count(a+":duration",m),e.ue.count(a+":startTime",f.startTime));e.ue.tag&&(f=void 0,f=50>m?a+":cached":a+":notCached",e.ue.tag(f));p[l]=!0;h++;break}}}}}});c.register("sg-media-builder",function(){return function(b){var c=this,e=b.src,h=[];c.build=function(){var c=h.join("_");return{src:e.replace(/\.([^.]+)$/,
"._"+c+"_.$1"),alt:b.alt}};c.autoCrop=function(){h.push("AC");return c};c.scaleX=function(b){h.push("SX"+b);return c};c.scaleY=function(b){h.push("SY"+b);return c};c.upScaleX=function(b){h.push("UX"+b);return c};c.upScaleY=function(b){h.push("UY"+b);return c};c.scaleXY=function(b,e){return c.upScaleX(b).scaleY(e)}}});c.when("A","gwAjax").register("shogunProductDB",function(b,c){function p(c){var a=[];g[c]={loading:!0,pdb_observe:function(f){a.push(f)},pdb_unobserve:function(f){a=b.$.grep(a,
function(a){return a!==f})},_trigger:function(){b.$.each(a,function(){this.call(g[c])})}};return g[c]}function h(m,a){this.ajaxUrl=m;this.experienceStr=a;this._add=function(a){a.p&&b.$.each(a.p,function(a,f){if(f.asin){var c=g[f.asin]||p(f.asin);b.$.extend(c,f,{loading:!1,error:!1});c._trigger(f)}})};this.addSims=function(a,c){if(c){var e=g[a]||p(a);b.$.extend(e,{sims:c});e._trigger(a)}};this._ajax=function(f,l){var g=b.$.extend(!0,{},m,{params:{sa:JSON.stringify(f),oe:a}});e.ue_sid&&(g.url+="/"+
e.ue_sid);e.ue_id&&(g.params.rrid=e.ue_id);return c(g.url,{method:g.method,params:g.params,success:l.success,error:l.error,id:"gw-jslibs-"+l.id})};this.get=function(a){return a in g?g[a]:p(a)}}var g={};return function(b,a){return new h(b,a)}});c.when("jQuery","p-detect").register("component-feed-carousel",function(b,n){var p=b.extend(!0,{},n);b.each({pointerPrefix:function(){return"onmspointerup"in document||"onpointerup"in document?"onpointerup"in document?"pointer":"MSPointer":!1},
actionMode:function(){var b=p.capabilities.pointerPrefix;return b?b:p.capabilities.touch?"touch":"mouse"}},function(b,a){p.capabilities[b]=a()});var h={};b.each({start:{mouse:"down",touch:"start",pointer:"down",MSPointer:"Down"},end:{mouse:"up",touch:"end",pointer:"up",MSPointer:"Up"}},function(b,a){var f=p.capabilities.actionMode,c="string"===typeof a?a:a[f];h[b]=c?f+c:a.mouse===k?"":"mouse"+a.mouse});p.action=h;var g=function(b,a,f,c){this.init(b,a,f,c)};g.prototype={init:function(g,a,f,l){var h=
this;b("html").hasClass("a-touch")&&g.addClass("feed-carousel-touch");h.adjustMarginOnChange=!0;h.defaultCssRightMargin=null;h.minItems=a||10;h.imgClass=".product-image";h.config=l||{};h.$carousel=g;h.cfMinItems=f||6;h.cfFired=!1;h.shovelerReadyFired=!1;h.slotId=h.getSlotId();h.touch=h.$carousel.hasClass("feed-carousel-touch");h.ajaxSource=h.$carousel.parent().hasClass("ajaxSource");h.$shelf=h.$carousel.find(".feed-carousel-shelf");h.$viewport=h.$carousel.find(".feed-carousel-viewport");h.$spinner=
h.$carousel.find(".spinner");h.$left=b(".feed-carousel-control.feed-left",g);h.$right=b(".feed-carousel-control.feed-right",g);h.$buttons=b(".feed-carousel-control",g);h.$thumb=b(".feed-scrollbar-thumb",g);h.shelfLeft=-1*parseInt(h.$shelf.css("left"),10);h.calcWidth=b("html").hasClass("a-lt-ie9");h.noOpacity=b("html").hasClass("a-lt-ie9");h.uniqueId=h.getUniqueId();h.$left.attr("aria-hidden",!0);h.$right.attr("aria-hidden",!0);h.bindEvents();h.$carousel.data("Carousel",h);h.$carousel.trigger("change");
h.token=!1;h.lock=function(){h.token=!0};h.unlock=function(){h.token=!1};h.locked=function(){return h.token};c.when("gw-first-carousel").execute(function(){h.first=h.$carousel.hasClass("first-carousel");h.shouldControlsOn()?h.showControls():h.hideControls()});h.uniqueId&&c.when(h.uniqueId).execute(function(a){h.appendCards(a.cards);if(a.cards&&h.slotId&&"object"===typeof e.ue&&"function"===typeof e.ue.count){var d="gw-"+h.slotId.toString()+"-lazy-cards",f="gw-"+h.slotId.toString()+"-lazy";e.ue.count(d,
(e.ue.count(d)||0)+a.cards.length);e.ue.count(f,(e.ue.count(f)||0)+1)}})},getUniqueId:function(){if(this.$viewport){var c=this.$viewport.closest(".shogun-widget");return 0<c.length?b(c[0]).attr("id"):null}},getSlotId:function(){var c=this.$carousel.closest(".gw-widget-instrument");return 0<c.length?b(c[0]).attr("id"):null},bindEvents:function(){function c(a){return p.capabilities.pointerPrefix&&-1<b.inArray(a.originalEvent.pointerType,[2,"touch"])||"touch"===p.capabilities.actionMode}var a=this,f=
b("body");a.$buttons.ready(function(f){a.shovelerReadyFired||(a.slotId&&(f=a.slotId.toString()+"-active",e.GWI&&e.GWI.recordLatency(f),e.GWI&&e.GWI.register(f)),a.shovelerReadyFired=!0)});a.$carousel.change(function(f){a.updateItems();a.updateSpinner();a.updateShelf();a.updateControls();null===a.defaultCssRightMargin&&a.$shelf.children("li").first()&&(a.defaultCssRightMargin=parseInt(a.$shelf.children("li").first().css("margin-right"),10));a.adjustMarginOnChange&&a.adjustCardMargin()});a.$left.click(function(f){f.preventDefault();
a.changePage(-1);a.slotId&&a.logCounter("gw-"+a.slotId.toString()+"-left")});a.$right.click(function(f){f.preventDefault();a.changePage(1);a.slotId&&a.logCounter("gw-"+a.slotId.toString()+"-right")});a.bindImageLoadEvents(a.$shelf);var l;b(e).resize(function(){clearTimeout(l);l=setTimeout(function(){var f=a.getDimensions(),f=Math.max(Math.min(f.shelfLeft,f.maxLeft),0);a.moveShelf(f)},100)});a.$thumb.mousedown(function(c){var l=c.clientX;1===c.which&&(c.preventDefault(),a.$carousel.addClass("scrolling"),
f.bind("mousemove.feed-carousel",function(d){var f=a.getDimensions(),f=Math.max(Math.min(f.shelfLeft+1/f.pageRatio*(d.clientX-l),f.maxLeft),0);l=d.clientX;a.moveShelf(f)}),b(document).bind("selectstart.feed-carousel",function(){return!1}))});f.add(e).mouseup(function(c){a.$carousel.removeClass("scrolling");a.$carousel.hasClass("hovering")||a.hideControls();f.unbind("mousemove.feed-carousel");b(document).unbind("selectstart.feed-carousel")});a.$carousel.hover(function(){a.$carousel.addClass("hovering");
clearTimeout(a.hoverTimer);a.hoverTimer=setTimeout(function(){a.$carousel.hasClass("hovering")&&!a.$carousel.hasClass("touching")?a.showControls():a.$carousel.removeClass("touching")},300)},function(){a.$carousel.removeClass("hovering touching");clearTimeout(a.hoverTimer);a.$carousel.hasClass("scrolling")||(a.hoverTimer=setTimeout(function(){a.$carousel.hasClass("hovering")||a.hideControls()},600))});a.$carousel.bind(p.action.start,function(f){c(f)&&(a.$carousel.addClass("touching"),clearTimeout(a.touchTimer),
a.touchTimer=setTimeout(function(){a.$carousel.removeClass("touching")},5E3))});a.$carousel.bind(p.action.end,function(f){c(f)&&(a.$carousel.removeClass("touching"),clearTimeout(a.touchTimer),clearTimeout(a.hoverTimer))});a.$viewport.scroll(function(){a.shelfLeft=a.$viewport.scrollLeft();a.updateControls()})},bindImageLoadEvents:function(c){var a=this;b(a.imgClass,c).one("load",function(){a.$carousel.trigger("change")})},getDimensions:function(){var b=this.$shelf.width(),a=this.shelfLeft,f=this.$carousel.width();
return{pageWidth:f,shelfWidth:b,shelfLeft:a,pageRatio:f/b,leftRatio:a/b,maxLeft:b-f}},updateItems:function(){var c=this,a=c.$shelf.find(".feed-carousel-card"),f=function(a){return"none"===a.css("display")};a.each(function(a,g){var h=b(g);if(!f(h)&&!c.config.visibleBeforeLoad)return!0;h.attr("aria-posinset",a+1);h.attr("aria-hidden",!1);h.attr("role","listitem");return 0>=h.find(c.imgClass).filter(function(){return!this.complete}).length?(h.css("display","inline-block"),a+1>=c.cfMinItems&&!c.cfFired&&
(c.slotId&&(h=c.slotId.toString()+"-visible",e.GWI&&e.GWI.recordLatency(h),e.GWI&&e.GWI.register(h)),c.cfFired=!0),!0):!1});a.attr("aria-setsize",a.size());c.$items=a.filter(function(){return!f(b(this))})},updateShelf:function(){var c=0;this.calcWidth&&(this.$shelf.children().each(function(){c+=b(this).outerWidth(!0)}),this.$shelf.width(c));this.touch&&this.$carousel.not(".fresh-shoveler-tablet-app .feed-carousel").height(this.$shelf.outerHeight(!0))},updateSpinner:function(){this.size()<this.minItems&&
this.ajaxSource?this.$spinner.show():(this.size()<this.minItems&&"object"===typeof e.ue&&"function"===typeof e.ue.count&&e.ue.count("shovelerNotEnoughItem",(e.ue.count("shovelerNotEnoughItem")||0)+1),this.$spinner.hide())},updateControls:function(){this.updateArrows();this.updateScrollThumb()},shouldControlsOn:function(){return this.first&&!this.touch},showControls:function(b){this.$thumb.add(this.$buttons).stop(!0,!0).fadeIn({duration:300,complete:b,queue:!1})},hideControls:function(b){var a=this.$thumb;
this.shouldControlsOn()||(a=a.add(this.$buttons));a.stop(!0,!0).fadeOut({duration:300,complete:b,queue:!1})},appendCards:function(b){this.$shelf.append(b);this.bindImageLoadEvents(b);this.$carousel.trigger("change")},updateArrows:function(){var c=this,a=c.getDimensions();b.each([{$e:c.$left,enabled:0<a.shelfLeft},{$e:c.$right,enabled:a.shelfLeft<a.maxLeft}],function(a,b){var h=b.$e;b.enabled?h.removeClass("feed-control-disabled"):h.addClass("feed-control-disabled");c.noOpacity&&(b.enabled?h.css("opacity",
"1"):h.css("opacity","0.5"))})},updateScrollThumb:function(){var c=this.getDimensions(),a=c.leftRatio*c.pageWidth,c=Math.min(c.pageRatio*c.pageWidth,c.pageWidth);this.$thumb.width(c).each(function(){b(this).animate({left:a},0)})},logCounter:function(b){"object"===typeof e.ue&&"function"===typeof e.ue.count&&(e.ue.count(b,(e.ue.count(b)||0)+1),e.ue.count("gw-shoveler-click",1))},changePage:function(b){var a=this.getDimensions(),f=this.alignWithItem(a.shelfLeft+b*a.pageWidth),f=Math.min(0>b?f.right:
f.left,a.maxLeft);this.locked()||(this.lock(),a.shelfLeft===f?(this.bounce(this.$shelf,-30*b),this.bounce(this.$thumb,6*b)):this.moveShelf(f,400))},moveShelf:function(b,a){function f(){c.updateArrows();c.unlock()}var c=this;a=a||0;c.shelfLeft=b;if(c.touch)c.$viewport.animate({scrollLeft:b},a,"swing",f);else{var h=c.getDimensions(),h=b/h.shelfWidth*h.pageWidth;c.$shelf.animate({left:-b},a,"swing",f);c.$thumb.animate({left:h},a,"swing",function(){c.updateScrollThumb();c.unlock()})}},getItems:function(){return this.$items},
size:function(){return this.getItems().length},alignWithItem:function(c){if(0>c)return{left:0,right:0};var a=this,f=a.getItems(),h=f.map(function(){var f=a.cardPosition(b(this));if(c>=f.left&&c<=f.right)return f}).get(0);return h?h:a.cardPosition(f.last())},cardPosition:function(b){var a=(b.position()||{left:0,right:0}).left;b=a+b.outerWidth(!0);return{left:a,right:b}},bounce:function(c,a){function f(a){var f={};f[h.touch?"left":"marginLeft"]=a;return f}var h=this;c.each(function(){var c=b(this);
c.animate(f(a),400,"swing",function(){c.animate(f(0),100,"swing",h.unlock)})})},setCardMargin:function(b){this.$shelf.children("li").first()&&this.$shelf.children("li").first().css("margin-right")!==b+"px"&&(this.$shelf.children("li").css("margin-right",b+"px"),this.updateShelf())},adjustCardMargin:function(b){b=b===k||null===b?this.defaultCssRightMargin:b;this.setCardMargin(b);var a=this.getDimensions(),a=0>a.maxLeft?Math.ceil(-a.maxLeft/this.size()):b;this.setCardMargin(a<b?b:a)}};return{createCarousel:function(c,
a,f,h){b(c).each(function(c,e){var d=b(e);new g(d,a,f,h)})}}});c.when("jQuery","SafeP").execute("shoveler-lazy-non-visible-images",function(b,n){function p(b){"object"===typeof g.ue&&"function"===typeof g.ue.count&&g.ue.count(b,(g.ue.count(b)||0)+1)}function h(){g.GWData&&b.each(g.GWData,function(c,a){if(c&&a&&a.data&&!a.loaded){a.loaded=!0;p("gw-lazy-load-all");var f=[];b.each(a.data,function(a,c){f.push(b(c)[0])});f&&0<f.length&&p("gw-lazy-load-non-empty");n&&n.register(c,function(){return{cards:f}})}})}
var g=e;c.when("x1").execute(h);c.when("ready").execute(h);c.when("load").execute(h)});c.register("SafeP",function(){var b={};return{register:function(e,p){"string"===typeof e&&"function"===typeof p&&(b[e]||(b[e]=function(h,g){c.register(h,g);b[h]=function(){}}),b[e]&&b[e](e,p))}}});c.when("A").register("resizeable-inline-video",function(b){function n(b,a){"function"===typeof g.uet&&a&&g.uet(b,a,{wb:1})}function p(b,a){"function"===typeof g.uex&&a&&g.uex(b,a,{wb:1})}var h=
b.$,g=e;return function(e,a,f){function l(){D.removeClass("player-uncommenced viewport-loaded").addClass("viewport-loading player-loading");t.css("z-index",1).css("opacity",1);n("tc","airyInlineVideoLoadingMonitor");n("tc",f.loadingScope);n("bb","airyInlineVideoPlaybackMonitor");n("bb",f.playbackScope)}function r(d){d=d||{};return{play:d.play||C,stop:d.stop||C,resize:d.resize||C,airyReady:d.airyReady||C}}function v(){return new r({airyReady:function(d){l();E=new k(d);E.play()},stop:function(){var d;
d=C;A.removeClass("viewport-loading").addClass("viewport-loaded");t.css("z-index",-1).css("opacity",0);z.length&&q.hide();d()}})}function d(d){return new r({play:function(){E=new k(d);q.fadeOut(1E3,function(){q.css("display","block");q.css("visibility","hidden");l();E.play()})}})}function k(d){return new r({play:function(){B.removeClass("viewport-loading").addClass("viewport-loaded");D.removeClass("player-loading");n("be","airyInlineVideoLoadingMonitor");n("be",f.loadingScope);p("ld","airyInlineVideoLoadingMonitor");
p("ld",f.loadingScope);E=new u(d)}})}function u(d){return new r({stop:function(){E=new y(d);d.pause()}})}function y(d){return new r({})}var A=h(e),t=A.find(".airy-video-container"),q=A.find(".image-map-before"),z=A.find(".image-map-after"),B=A.find(".airy-video-viewport-in"),D=A.add(B),C=function(){},E;f=f||{};n("bb","airyInlineVideoLoadingMonitor");n("bb",f.loadingScope);E=new function(b){function q(d){function b(d){"object"===typeof g.ue&&"function"===typeof g.ue.count&&g.ue.count(d,(g.ue.count(d)||
0)+1)}a.bindings={loadedmetadata:function(d,a){E.airyReady(t);n("cf","airyInlineVideoLoadingMonitor");n("cf",f.loadingScope)},videounsupportederror:function(d,a){b("airyResizableInlineVideoUnsupportedError")},decodeerror:function(d,a){b("airyResizableInlineVideoDecodeError")},networkerror:function(d,a){b("airyResizableInlineVideoNetworkError")},undefinederror:function(d,a){b("airyResizableInlineVideoUndefinedError")},beganplaying:function(){E.play()},ended:function(){n("af","airyInlineVideoPlaybackMonitor");
n("af",f.playbackScope);E.stop()}};var t=d.embed(a);f.autoPlay&&t.play({isAsync:!0})}b=b||{};g.gwAiryAssetLoaded||(g.gwAiryAssetLoaded=b,b.js&&c.load.js(b.js),b.css&&c.load.css(b.css));D.addClass("player-uncommenced");f.whenReady?c.when("Airy","ready").execute(q):c.when("Airy").execute(q);return new r({airyReady:function(a){E=new d(a);E.play()},play:function(){E=new v}})}(f.airyAssetUrls);(function(){b.on("resize",function(){E.resize()})})()}})});